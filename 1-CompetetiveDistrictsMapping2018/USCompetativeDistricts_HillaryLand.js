/* 
*/
/* An array containing all of the information needed to create Competative Districts Map markers
Party R: Republican
Party D: Democrate
CPVI_Party: Cook Partisan Voting index - R, D, E(Even)
CPVI_M: Cook Partisan Voting Magnitude
CPVI_D: Cook Partisan Voting Direction: TossUp, Lean, Likely, Solid
*/

var locations2018 =
[
  {
    Coordinates: [37.6, -121.0],
    StateDistrict: "California10",
    District2018:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R" 
    }
  },
  {
    Coordinates: [35.8, 	-117.2],
    StateDistrict: "California25",
    District2018:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.5625, -117.5006],
    StateDistrict: "California39",
    District2018:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.4251, -117.4006],
    StateDistrict: "California45",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 3,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.3706, -117.5219],
    StateDistrict: "California48",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 4,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [25.4105, -80.5956],
    StateDistrict: "Florida26",
    District2018:
    {
      CPVI_Party: "D",
      CPVI_M: 6,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [25.3545, -80.2030],
    StateDistrict: "Florida27",
    District2018:
    {
      CPVI_Party: "D",
      CPVI_M: 5,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [41.1234, -94.3825],
    StateDistrict: "Iowa3",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 1,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [42.1030, -88.1312],
    StateDistrict: "Illinois6",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 2,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [38.00, -89.15],
    StateDistrict: "Illinois12",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 5,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [38.6, -95.3],
    StateDistrict: "Kansas2",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 10,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [38.0312, -84.0917],
    StateDistrict: "Kentucky6",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 9,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [45.2906, -69.0321],
    StateDistrict: "Maine2",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 2,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [42.3852, -83.5643],
    StateDistrict: "Michigan8",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 4,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [35.2247, -80.5018],
    StateDistrict: "NorthCarolina9",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 7,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [35.4700, -78.1247],
    StateDistrict: "NorthCarolina13",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 6,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.8533, -74.8498],
    StateDistrict: "NewJersey3",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 2,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [40.60, -74.50],
    StateDistrict: "NewJersey7",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 3,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [35.2307, -106.1758],
    StateDistrict: "NewMexico2",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 6,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [42.1340, -74.2532],
    StateDistrict: "NewYork19",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 2,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [42.955578, -78.677797],
    StateDistrict: "NewYork22",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 6,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.10, -84.34],
    StateDistrict: "Ohio1",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 5,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.5540, -75.1251],
    StateDistrict: "Pennsylvania1",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 1,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [29.4327, -95.3001],
    StateDistrict: "Texas7",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 7,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [32.5513, -96.3913],
    StateDistrict: "Texas32",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 5,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [40.6700, -111.9300],
    StateDistrict: "Utah4",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 13,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [37.4229, -75.5313],
    StateDistrict: "Virginia2",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 3,
      CPVI_D: "TossUP",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [37.5805, -77.4448],
    StateDistrict: "Virginia7",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 6,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [47.18, -122.06],
    StateDistrict: "Washington8",
    District2018:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [43.5366, -93.4242],
    StateDistrict: "Minnesota1",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 5,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "blue",
      Party: "D"
    }
  },
  {
    Coordinates: [47.1501, -92.5750],
    StateDistrict: "Minnesota8",
    District2018:
    {
      CPVI_Party: "R",
      CPVI_M: 4,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "blue",
      Party: "D"
    }
  }
];

// CPVI based on latest Report
var locations2016_Hillary =
[
  {
    Coordinates: [31.5459, -109.5619],
    StateDistrict: "Arizona2",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 1,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [37.6, -121.0],
    StateDistrict: "California10",
    District2016_Hillary:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [36.5, -119],
    StateDistrict: "California21",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 5,
      CPVI_D: "Likely_R",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [35.8, -117.2],
    StateDistrict: "California25",
    District2016_Hillary:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.5625, -117.5006],
    StateDistrict: "California39",
    District2016_Hillary:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.4251, 117.4006],
    StateDistrict: "California45",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 3,
      CPVI_D: "Tossup",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.3706, -117.5219],
    StateDistrict: "California48",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 4,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [33.4, -117.1],
    StateDistrict: "California49",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 1,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.4518, -104.4555],
    StateDistrict: "Colorado6",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 2,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [25.4105, -80.5956],
    StateDistrict: "Florida26",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 6,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [25.3545, -80.2030],
    StateDistrict: "Florida27",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 5,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [42.1030, -88.1312],
    StateDistrict: "Illinois6",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 2,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [38.8, -94.8],
    StateDistrict: "Kansas3",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 4,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [44.5945, -93.3143],
    StateDistrict: "Minnesota3",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 1,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [40.60, -74.50],
    StateDistrict: "NewJersey7",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 3,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [43.046119, -76.151616],
    StateDistrict: "NewYork24",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 3, 
      CPVI_D: "Lean_R",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.5540, -75.1251],
    StateDistrict: "Pennsylvania1",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 1,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [41.2314, -78.3414],
    StateDistrict: "Pennsylvania5",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 13,
      CPVI_D: "Likely_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [40.0337, -75.3827],
    StateDistrict: "Pennsylvania6",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 2,
      CPVI_D: "Likely_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.54, -75.55],
    StateDistrict: "Pennsylvania7",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 1,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [29.4237, -95.3001],
    StateDistrict: "Texas7",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 7,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [30.2321, -102.1936],
    StateDistrict: "Texas23",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 1,
      CPVI_D: "Lean_R",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [32.5513, -96.3913],
    StateDistrict: "Texas32",
    District2016_Hillary:
    {
      CPVI_Party: "R",
      CPVI_M: 5,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [39.0433, -77.5124],
    StateDistrict: "Virginia10",
    District2016_Hillary:
    {
      CPVI_Party: "D",
      CPVI_M: 1,
      CPVI_D: "Lean_D",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  },
  {
    Coordinates: [47.18, -122.06],
    StateDistrict: "Washington8",
    District2016_Hillary:
    {
      CPVI_Party: "E",
      CPVI_M: 0,
      CPVI_D: "TossUp",
      Winners_Vote_Percentage: 0,
      color: "red",
      Party: "R"
    }
  }
]

/* Looping through locations and creating district markers */
var District2018Markers = [];
for (var i = 0; i < locations2018.length; i++)
{
  // Setting the marker radius for the District2018 by passing population into the markerSize function
  District2018Markers.push(
    L.circle
    (
      locations2018[i].Coordinates,
      {
        stroke: false,
        fillOpacity: 0.99,
        // color: "black",
        fillColor: locations2018[i].District2018.color,
        radius: 60000
      }
    ).bindPopup(locations2018[i].StateDistrict + "," + locations2018[i].District2018.CPVI_D + "-" + 
    locations2018[i].District2018.CPVI_Party + locations2018[i].District2018.CPVI_M)
  );
}

/* Looping through locations and creating district markers */
var District2016_HillaryMarkers = [];
for (var i = 0; i < locations2016_Hillary.length; i++)
{
  // Setting the marker radius for the District2018 by passing population into the markerSize function
  



  District2016_HillaryMarkers.push(
    L.circle
    (
      locations2016_Hillary[i].Coordinates,
      {
        stroke: false,
        fillOpacity: 0.90,
        color: "purple",
        // fillColor: locations2016_Hillary[i].District2016_Hillary.color,
        radius: 30000
      }
    ).bindPopup(locations2016_Hillary[i].StateDistrict + "," + locations2016_Hillary[i].District2016_Hillary.CPVI_D + "-" + 
    locations2016_Hillary[i].District2016_Hillary.CPVI_Party + locations2016_Hillary[i].District2016_Hillary.CPVI_M)
  );
}

/* Defining variables for base layers */
var streetmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
  attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
  maxZoom: 18,
  id: "mapbox.streets",
  accessToken: API_KEY
});

var darkmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
  attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
  maxZoom: 18,
  id: "mapbox.dark",
  accessToken: API_KEY
});

/* Creating two separate layer groups: one for districtS2016 and one for districtS2018 */
var DistrictS2018 = L.layerGroup(District2018Markers);
var DistrictS2016_Hillary = L.layerGroup(District2016_HillaryMarkers);

/* Creating a baseMaps object */
var baseMaps =
{
  "Street Map": streetmap,
  "Dark Map": darkmap
};

/* Creatig an overlay object */
var overlayMaps =
{
  "2018CompetativeDistricts": DistrictS2018,
  "2016Districts_Hillary": DistrictS2016_Hillary,
};

/* Defining a map object */
var myMap = L.map("map",
{
  center: [37.09, -95.71],
  zoom: 5,
  layers: [streetmap, DistrictS2018, DistrictS2016_Hillary]
});

/* Passing map layers into layer control, adding the layer control to the map */
L.control.layers(baseMaps, overlayMaps,
{
  collapsed: false
}).addTo(myMap);