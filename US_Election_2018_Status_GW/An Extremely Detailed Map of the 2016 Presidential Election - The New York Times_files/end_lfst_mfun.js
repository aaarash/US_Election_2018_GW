var creative={selectors:[".main-container",".jellybean",".jellybean1",".jellybean2",".jellybean3",".award-logo",".logo",".replay",".legal-btn",".nameplate",".frames",".copies",".copy",".copy-f1",".copy-f2",".copy-f3",".ctas",".cta1",".cta2",".main-cta1",".main-cta2",".legal-content",".legal-close",".main-legal",".bg-exit"],config:{isVisible:!1,isLoadFonts:!1},dom:{},timelines:{},rules:helpers.createStyleSheet(),timeouts:{resetStep1:null,resetStep2:null}};function removeNodeIfNoImageInJb(e,a){a||creative.dom.jellybean.removeChild(e)}function setCopy(e,a){a?e.innerHTML=a.replace(/{/g,"<sup>").replace(/}/g,"</sup>").replace(/\[/g,"<sub>").replace(/\]/g,"</sub>"):creative.dom.frames.removeChild(e)}function addParsedContent(e,a,t,n){var o=parseMarkup(t=t.replace(/{/g,"<sup>").replace(/}/g,"</sup>"),a,n);e.innerHTML+=parseSubSupTags(o)}function parseSubSupTags(e){var a=/[^*^#]+/;return(e.match(/(\*)([^*]+)(\*)/g)||[]).reduce(function(e,t){var n="sub",o=t.indexOf("*")>=0,i=t.match(a)[0];return o&&(n="sup"),e.replace(t,"<"+n+">"+i+"</"+n+">")},e)}function parseMarkup(e,a,t){t=t||"c1";var n=/(\[|\{)\/?[a-z0-9]+(\]|\})/g,o=/[a-z0-9]+/g,i=/(\[|\{)\/?[a-z]+[0-9]+(\]|\})/g,c=e.match(n)||[];return c.length&&c.some(function(e){return e.match(i)})||(e="["+t+"]"+e+"[/"+t+"]",c.unshift("["+t+"]"),c.push("[/"+t+"]")),c=c.reduce(function(e,t){var n="",i="p",c=t.indexOf("/")>=0,r=t.indexOf("{")>=0,s=t.match(o)[0];return"b"===s&&(i="b"),c?n="</"+i+">":"b"===s?n="<"+i+">":(n="<"+i,a.elementId&&(n+=' id="'+a.elementId+'"'),n+=' class="',a.isCta||(n+="copies copy "),r&&(n+=" inline "),a.extraClasses&&(n+=a.extraClasses+" "),n+=s+'">'),e.replace(t,n)},e),a.copyContainer&&(c="<div id="+a.copyContainer+" class="+a.copyContainer+">"+c+"</div>"),a.f1Lines&&(c='<div class="item-all f1-line-1 f1-lines"></div><div class="item-all f1-line-2 f1-lines"></div>'),c}function setJellybeanBgi(e,a){removeNodeIfNoImageInJb(creative.dom[e],a),helpers.createRule("."+e,"background-image","url("+a+")")}function setBgi(e,a){helpers.createRule("."+e,"background-image","url("+a+")")}function initTmpl(){if(document.querySelector(".main-container")){loadFonts();var e=function(){creative.config.isVisible=!0,politeInit()};helpers.setup(),overrideCTAsLogo(),addDynamic(),addListeners(),Enabler.isVisible()?e():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,e)}else setTimeout(initTmpl,50)}function politeInit(){creative.config.isVisible&&creative.config.isLoadFonts&&(show(),starCssAnimations())}function loadFonts(){WebFont.load({google:{families:["Oswald:300,400,700","Lato:700,900","&sizeUnit=?728x90"]},active:function(){creative.config.isLoadFonts=!0,politeInit()}})}function validateOverlapping(){creative.dom.nameplate.offsetHeight>32&&creative.dom.nameplate.classList.add("letter-spacing"),[creative.dom.copyF1,creative.dom.copyF2,creative.dom.copyF3].forEach(function(e){var a=e.offsetHeight;a>64&&(e.classList.add("letter-spacing-copy-first"),(a=e.offsetHeight)>64&&e.classList.add("letter-spacing-copy-second"))}),creative.dom.copies.classList.remove("invisible")}function addDynamic(){creative.dom.mainContainer.classList.add(dynamicContent.parent[0].creative_template),creative.dom.ctas.classList.add(dynamicContent.ctas[0].theme),creative.dom.cta1.innerHTML=dynamicContent.ctas[0].text_cta1,creative.dom.cta2.innerHTML=dynamicContent.ctas[0].text_cta2,helpers.createRule(".main-container","background-color",dynamicContent.messages[0].background_color),helpers.createRule(".copies","color",dynamicContent.messages[0].font_color),helpers.createRule(".logo","background-image","url("+dynamicContent.parent[0].logo.Url+")"),validateColorsCta("cta1"),validateColorsCta("cta2"),setCopy(creative.dom.legalContent,dynamicContent.messages[0].legal.replace(/\n/g,"<br />")),"mid_funnel"===dynamicContent.parent[0].creative_template?(addParsedContent(creative.dom.copyF1,{},dynamicContent.messages[0].copy_1,"c1"),addParsedContent(creative.dom.copyF2,{},dynamicContent.messages[0].copy_2,"c1"),addParsedContent(creative.dom.copyF3,{},dynamicContent.messages[0].copy_3,"c1")):(setCopy(creative.dom.copyF1,dynamicContent.messages[0].copy_1),setCopy(creative.dom.copyF2,dynamicContent.messages[0].copy_2),setCopy(creative.dom.copyF3,dynamicContent.messages[0].copy_3)),dynamicContent.parent[0].creative_template.search("lifestyle")>-1?(setCopy(creative.dom.nameplate,dynamicContent.parent[0].nameplate_text),setJellybeanBgi("jellybean1",dynamicContent.messages[0].image_1.Url),setJellybeanBgi("jellybean2",dynamicContent.messages[0].image_2.Url),setJellybeanBgi("jellybean3",dynamicContent.messages[0].image_3.Url)):dynamicContent.parent[0].creative_template.search("mid_funnel")>-1?(setJellybeanBgi("jellybean1",dynamicContent.messages[0].image_1.Url),setJellybeanBgi("jellybean2",dynamicContent.messages[0].image_2.Url),setJellybeanBgi("jellybean3",dynamicContent.messages[0].image_3.Url),setBgi("nameplate",dynamicContent.parent[0].nameplate_image.Url)):(setCopy(creative.dom.nameplate,dynamicContent.parent[0].nameplate_text),setJellybeanBgi("jellybean1",dynamicContent.endemic_images[0].endemic_image.Url)),dynamicContent.messages[0].event_img_1.Url&&(creative.dom.mainContainer.classList.add("award"),setJellybeanBgi("award-logo",dynamicContent.messages[0].event_img_1.Url)),adjustCtas()}function validateColorsCta(e){"lifestyle_art_full"===dynamicContent.parent[0].creative_template?(dynamicContent.ctas[0]["fill_color_"+e]&&helpers.createRule(".main-container .ctas.bar .main-"+e,"background-color",dynamicContent.ctas[0]["fill_color_"+e]),dynamicContent.ctas[0]["text_color_"+e]&&helpers.createRule(".main-container .ctas .main-"+e,"color",dynamicContent.ctas[0]["text_color_"+e]),dynamicContent.ctas[0]["hover_fill_color_"+e]&&helpers.createRule(".main-container .ctas.bar .main-"+e+":hover","background-color",dynamicContent.ctas[0]["hover_fill_color_"+e]),dynamicContent.ctas[0]["hover_text_color_"+e]&&helpers.createRule(".main-container .ctas .main-"+e+":hover","color",dynamicContent.ctas[0]["hover_text_color_"+e])):(dynamicContent.ctas[0]["fill_color_"+e]&&helpers.createRule(".main-container .ctas.fill .cta."+e+",.main-container .ctas.bar .cta."+e,"background-color",dynamicContent.ctas[0]["fill_color_"+e]),dynamicContent.ctas[0]["text_color_"+e]&&helpers.createRule(".main-container .ctas .cta."+e,"color",dynamicContent.ctas[0]["text_color_"+e]),dynamicContent.ctas[0]["hover_fill_color_"+e]&&helpers.createRule(".main-container .ctas.fill .cta."+e+":hover,.main-container .ctas.bar .cta."+e+":hover","background-color",dynamicContent.ctas[0]["hover_fill_color_"+e]),dynamicContent.ctas[0]["hover_text_color_"+e]&&helpers.createRule(".main-container .ctas .cta."+e+":hover","color",dynamicContent.ctas[0]["hover_text_color_"+e]),dynamicContent.ctas[0]["border_color_"+e]&&helpers.createRule(".main-container .ctas.fill .cta."+e,"border-color",dynamicContent.ctas[0]["border_color_"+e]),dynamicContent.ctas[0]["hover_border_color_"+e]&&helpers.createRule(".main-container .ctas.fill .cta."+e+":hover","border-color",dynamicContent.ctas[0]["hover_border_color_"+e]))}function adjustCtas(){""===dynamicContent.ctas[0].text_cta2&&(creative.dom.mainCta2.classList.add("hide"),creative.dom.mainContainer.classList.add("single-cta"))}function overrideCTAsLogo(){dynamicContent.messages[0].logo_override.Url&&(dynamicContent.parent[0].logo.Url=dynamicContent.messages[0].logo_override.Url,creative.dom.logo.classList.add("logo-apple"),creative.dom.mainContainer.classList.add("logo-large")),dynamicContent.messages[0].theme_cta_override&&creative.dom.ctas.classList.add(dynamicContent.messages[0].theme_cta_override),dynamicContent.messages[0].text_cta1_override&&""===dynamicContent.messages[0].text_cta2_override&&(creative.dom.mainCta2.classList.add("hide"),creative.dom.mainContainer.classList.add("single-cta"))}function addListeners(){helpers.addListeners([{obj:creative.dom.mainContainer,type:"mouseenter",callback:handlers.onOver},{obj:creative.dom.mainCta1,type:"click",callback:handlers.onCta1Exit},{obj:creative.dom.mainCta2,type:"click",callback:handlers.onCta2Exit},{obj:creative.dom.bgExit,type:"click",callback:handlers.onExit},{obj:creative.dom.replay,type:"mousedown",callback:handlers.onReload},{obj:creative.dom.legalBtn,type:"mousedown",callback:handlers.onBtnLegalOpen},{obj:creative.dom.legalClose,type:"mousedown",callback:handlers.onBtnLegalClose},{obj:document,type:"visibilitychange",callback:handlers.onVisibilityChange},{obj:creative.dom.copyF3,type:"animationend",callback:hideReplay}])}function show(){creative.dom.mainContainer.style.display="block",setTimeout(function(){validateOverlapping()},0)}function starCssAnimations(){creative.dom.mainContainer.classList.add("animated")}function jumpToLastFrame(){creative.dom.mainContainer.classList.remove("animated"),creative.dom.mainContainer.classList.remove("animation_done"),creative.dom.mainContainer.classList.add("animation_done")}function hideReplay(){creative.dom.mainContainer.classList.remove("animated"),creative.dom.mainContainer.classList.add("animation_done")}var handlers={onOver:function(){Enabler.counter("hover",!0)},onExit:function(){Enabler.exitOverride("vlp_background",dynamicContent.messages[0].background_exit.Url),jumpToLastFrame()},onCta1Exit:function(){Enabler.exitOverride("cta_1_dyn",dynamicContent.ctas[0].exit_cta1.Url),jumpToLastFrame()},onCta2Exit:function(){Enabler.exitOverride("cta_2_dyn",dynamicContent.ctas[0].exit_cta2.Url),jumpToLastFrame()},onBtnLegalOpen:function(){creative.dom.mainLegal.scrollTop=0;Enabler.counter("legal-open",!0)},onBtnLegalClose:function(){Enabler.counter("legal-close",!0)},onReload:function(){Enabler.counter("replay",!0),clearTimeout(creative.timeouts.resetStep1),clearTimeout(creative.timeouts.resetStep2),creative.dom.mainContainer.classList.add("kill-animation"),creative.timeouts.resetStep1=setTimeout(function(){creative.dom.mainContainer.classList.remove("animated"),creative.dom.mainContainer.classList.remove("animation_done"),creative.dom.mainContainer.classList.remove("kill-animation")},100),creative.timeouts.resetStep2=setTimeout(function(){creative.dom.mainContainer.classList.add("animated")},120)},onVisibilityChange:function(){jumpToLastFrame()}};initTmpl();